<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Feedback List</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-blue-300 font-sans">
    <div class="container mx-auto py-10 px-4">
        <!-- Popup message -->
        <% if (message) { %>
            <div id="popup-message" class="bg-green-500 text-white px-4 py-2 rounded mb-4 text-center">
                <%= message %>
            </div>
        <% } %>
        <div class="bg-white p-8 rounded-lg shadow-md min-w-6xl mx-auto">
            <h1 class="text-3xl font-semibold text-gray-800 mb-6 text-center">Submitted Feedbacks</h1>
            <table class="min-w-full bg-white border border-gray-200">
                <thead>
                    <tr>
                        <th class="py-2 px-4 border-b">Student Name</th>
                        <th class="py-2 px-4 border-b">Roll No</th>
                        <th class="py-2 px-4 border-b">Phone</th>
                        <th class="py-2 px-4 border-b">Email</th>
                        <th class="py-2 px-4 border-b">Parent Name</th>
                        <th class="py-2 px-4 border-b">Parent Phone</th>
                        <th class="py-2 px-4 border-b">Parent Email</th>
                        <th class="py-2 px-4 border-b">Student Performance</th>
                        <th class="py-2 px-4 border-b">Teacher Ability</th>
                        <th class="py-2 px-4 border-b">College Facilities</th>
                        <th class="py-2 px-4 border-b">Cleanliness</th>
                        <th class="py-2 px-4 border-b">Actions</th>
                    </tr>
                </thead>
                <tbody>
                    <% feedbacks.forEach(function(feedback) { %>
                    <tr>
                        <td class="py-2 px-4 border-b"><%= feedback.studentName %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.rollNo %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.phone %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.email %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.parentName %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.parentPhone %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.parentEmail %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.studentPerformance %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.teacherAbility %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.collegeFacilities %></td>
                        <td class="py-2 px-4 border-b"><%= feedback.cleanliness %></td>
                        <td class="py-2 px-4 border-b">
                            <form action="/deleteFeedback/<%= feedback._id %>" method="POST">
                                <button type="submit" class="bg-red-500 text-white px-4 py-2 rounded">Delete</button>
                            </form>
                        </td>
                    </tr>
                    <% }) %>
                </tbody>
            </table>

            <div class="mt-8">
                <h2 class="text-xl font-semibold text-gray-700 mb-3">Detailed Comments</h2>
                <% feedbacks.forEach(function(feedback) { %>
                <div class="bg-gray-100 p-4 mb-4 rounded-lg shadow-sm">
                    <h3 class="font-bold text-gray-800">Student: <%= feedback.studentName %> (Roll No: <%= feedback.rollNo %>)</h3>
                    <p class="text-gray-600">Performance Comment: <%= feedback.studentComments %></p>
                    <p class="text-gray-600">Teacher Comment: <%= feedback.teacherComments %></p>
                    <p class="text-gray-600">College Comment: <%= feedback.collegeComments %></p>
                    <p class="text-gray-600">Cleanliness Comment: <%= feedback.cleanlinessComments %></p>
                    <p class="text-gray-600">Attendance: <%= feedback.attendance %></p>
                    <p class="text-gray-600">Performance Rating: <%= feedback.performance %></p>
                    <p class="text-gray-600">Faculty Interaction: <%= feedback.facultyInteraction %></p>
                    <p class="text-gray-600">Examination Process: <%= feedback.examinationProcess %></p>
                    <p class="text-gray-600">Fee Structure Satisfaction: <%= feedback.feeStructure %></p>
                    <p class="text-gray-600">Result Satisfaction: <%= feedback.resultSatisfaction %></p>
                    <form action="/deleteFeedback/<%= feedback._id %>" method="POST" class="mt-2">
                        <button type="submit" class="bg-red-500 text-white px-4 py-1 rounded">Delete Feedback</button>
                    </form>
                </div>
                <% }) %>
            </div>
        </div>
    </div> 
</body>

<script>
    // Display the popup message and hide it after 3 seconds
    document.addEventListener("DOMContentLoaded", function () {
        const popupMessage = document.getElementById("popup-message");
        if (popupMessage) {
            setTimeout(() => {
                popupMessage.style.display = "none";
            }, 3000); // 3000ms = 3 seconds
        }
    });
</script>

</html>
